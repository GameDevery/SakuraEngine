UseTab: Never
TabWidth: 4
AccessModifierOffset: -4
IndentWidth: 4
ObjCBlockIndentWidth: 4
ContinuationIndentWidth: 4
MaxEmptyLinesToKeep: 1

AllowShortIfStatementsOnASingleLine: true
AllowShortBlocksOnASingleLine: true

AlignConsecutiveAssignments: false
AlignConsecutiveDeclarations: false
AlignTrailingComments: true
SpacesBeforeTrailingComments: 1
SpacesInSquareBrackets: false
IndentCaseLabels: false
SpaceBeforeAssignmentOperators: true

# 关键设置：正常代码使用固定缩进，宏内部特殊处理
AlignAfterOpenBracket: DontAlign
AlignOperands: DontAlign
BinPackArguments: false
BinPackParameters: false

BreakConstructorInitializersBeforeComma: true
SpaceAfterCStyleCast: false
SpaceBeforeParens: ControlStatements
SpaceBeforeRangeBasedForLoopColon: true
SpaceInEmptyParentheses: false
SortUsingDeclarations: false

ColumnLimit: 0
PointerAlignment: Left
ReferenceAlignment: Left
AllowAllParametersOfDeclarationOnNextLine: true
AlignEscapedNewlinesLeft: true

BreakBeforeBinaryOperators: None
BreakBeforeTernaryOperators: false

IndentPPDirectives: BeforeHash

BreakBeforeBraces: Custom
BraceWrapping:
  AfterClass: true
  AfterStruct: true
  AfterEnum: true
  AfterNamespace: true
  AfterUnion: true
  AfterFunction: true
  BeforeElse: true
  IndentBraces: false
  AfterExternBlock: false
  AfterControlStatement: true
Cpp11BracedListStyle: false

RequiresClausePosition: SingleLine

# 宏特殊处理
AttributeMacros:
  - "SUGOI_UNLIKELY"
  - "SUGOI_FORCEINLINE"
  - "FORCEINLINE"
  - "sattr"
  - "SKR_ALIGNAS"

WhitespaceSensitiveMacros:
  - "sattr"
  - "spush_attr"
  - "spop_attr"
  - "sreflect_enum"
  - "sreflect_struct"
  - "sreflect_enum_class"
  - "sreflect_interface"
  - "sreflect_function"

# 告诉 clang-format 这些宏是语句宏
StatementMacros:
  - "sreflect_struct"
  - "sreflect_enum"
  - "sreflect_enum_class"
  - "sreflect_interface"
  - "sreflect_function"
  - "sreflect_managed_component"

ForEachMacros: ["forloop"]

BreakAfterAttributes: Leave
IndentExternBlock: NoIndent

# 特殊处理：不要重新格式化宏块
ReflowComments: false

# 保持原有的换行
KeepEmptyLinesAtTheStartOfBlocks: true

SortIncludes: false